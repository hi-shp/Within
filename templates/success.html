{% extends 'base.html' %}

{% block title %}
매칭 요청 완료 - Withinstar
{% endblock %}

{% block content %}
<div class="success-container">
    <div class="success-box">
        <h1 class="success-title" style="color: #ff6384;">저장 성공! 매칭이 되면 알려드릴게요!</h1>
        <p class="success-heart">❤️ "추가 지목을 원하시나요?"</p>
        <p class="success-info">
            이후 추가로 관심을 표현하실 경우, <strong>1회당 2,500원</strong>의 요금이 부과됩니다.<br>
            비밀스럽게 마음을 전하는 <strong>Withinstar</strong>와 함께하세요!
        </p>
        <button id="openPopup" class="success-button" onclick="gtag('event', 'pay_2500_ofsuccess');">마음 전달하기</button>
        <hr class="divider">
        <h2 class="features-title">서비스 특징</h2>
        <ul class="features-list" style="list-style: none; padding: 0; color: #555; font-size: 0.8rem; line-height: 1.8; margin-bottom: 20px;">
            <li>🔒 암호화 시스템으로 정보가 절대 공개되지 않습니다.</li>
            <li>📩 상대방과 매칭 성공 시 Instagram DM으로 바로 알림!</li>
            <li>💌 마음을 전하는 간단하고 직관적인 서비스를 경험하세요.</li>
        </ul>
        <div style="text-align: center;">
            <a href="/" class="home-link" style="color: #d9534f; text-decoration: none; font-size: 0.8rem; padding-top: 20px; display: inline-block;" onclick="gtag('event', 'home_success');">
                홈으로 돌아가기
            </a>            
        </div>
    </div>
</div>

<!-- 팝업 레이아웃 -->
<div id="popup" class="popup" style="display: none;">
    <div class="popup-content">
        <h2>기능 준비 중</h2>
        <p>
            "마음 전달하기" 기능은 현재 구현 중입니다.<br>
            하지만 무료 매칭은 정상적으로 작동합니다.<br>
            조금만 기다려 주세요! 더 나은 서비스를 제공하겠습니다. 😊
        </p>
        <button id="closePopup" class="popup-button">닫기</button>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const openPopupButton = document.getElementById("openPopup");
        const popup = document.getElementById("popup");
        const closePopupButton = document.getElementById("closePopup");

        // 팝업 열기
        if (openPopupButton) {
            openPopupButton.addEventListener("click", function () {
                popup.style.display = "flex"; // 팝업 표시
            });
        }

        // 팝업 닫기
        if (closePopupButton) {
            closePopupButton.addEventListener("click", function () {
                popup.style.display = "none"; // 팝업 숨김
            });
        }
        // 페이지 로드 시 팝업을 강제로 열지 않음
    });
</script>
{% endblock %}
